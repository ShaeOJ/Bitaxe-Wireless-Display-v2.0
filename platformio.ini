; BitAxe Wireless Display v2.0
; Supports: CYD 2.4" (320x240 ILI9341), CYD 3.2" (320x240 ST7789), CYD 3.5" (480x320 ST7796)
; Build environments: cyd24r, cyd24c, cyd32r, cyd35c

[env]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
extra_scripts = post:merge_firmware.py

lib_deps =
    bodmer/TFT_eSPI@^2.5.43
    bblanchon/ArduinoJson@^6.21.5
    https://github.com/tzapu/WiFiManager.git

; Shared font flags (used by all environments)
[common_fonts]
build_flags =
    -DLOAD_GLCD=1
    -DLOAD_FONT2=1
    -DLOAD_FONT4=1
    -DLOAD_FONT6=1
    -DLOAD_FONT7=1
    -DLOAD_FONT8=1
    -DLOAD_GFXFF=1
    -DSMOOTH_FONT=1

; ============================================================
; CYD 2.4" (ESP32-2432S024) — ILI9341 320x240
; ============================================================

[cyd24_display]
build_flags =
    -DUSER_SETUP_LOADED=1
    -DILI9341_2_DRIVER=1
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=320
    -DTFT_MISO=12
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=2
    -DTFT_RST=-1
    -DTFT_BL=27
    -DTFT_BACKLIGHT_ON=HIGH
    -DUSE_HSPI_PORT=1
    -DTFT_INVERSION_ON=1
    -DSPI_FREQUENCY=55000000
    -DSPI_READ_FREQUENCY=20000000
    -DSCR_W=320
    -DSCR_H=240

; === 2.4" Resistive touch (XPT2046 via TFT_eSPI built-in) ===
[env:cyd24r]
build_flags =
    ${cyd24_display.build_flags}
    ${common_fonts.build_flags}
    -DTOUCH_RESISTIVE=1
    -DTOUCH_CS=33
    -DSPI_TOUCH_FREQUENCY=2500000

; === 2.4" Capacitive touch (CST820 I2C) ===
[env:cyd24c]
lib_deps =
    ${env.lib_deps}
    https://github.com/bitbank2/bb_captouch.git
build_flags =
    ${cyd24_display.build_flags}
    ${common_fonts.build_flags}
    -DTOUCH_CAPACITIVE=1
    -DTOUCH_SDA_PIN=33
    -DTOUCH_SCL_PIN=32
    -DTOUCH_INT_PIN=21
    -DTOUCH_RST_PIN=25

; ============================================================
; CYD 3.2" (ESP32-3248S032) — ST7789 320x240
; ============================================================

[cyd32_display]
build_flags =
    -DUSER_SETUP_LOADED=1
    -DST7789_DRIVER=1
    -DTFT_WIDTH=240
    -DTFT_HEIGHT=320
    -DTFT_MISO=12
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=2
    -DTFT_RST=-1
    -DTFT_BL=27
    -DTFT_BACKLIGHT_ON=HIGH
    -DUSE_HSPI_PORT=1
    -DTFT_INVERSION_ON=1
    -DSPI_FREQUENCY=55000000
    -DSPI_READ_FREQUENCY=20000000
    -DSCR_W=320
    -DSCR_H=240

; === 3.2" Resistive touch (XPT2046 via TFT_eSPI built-in) ===
[env:cyd32r]
build_flags =
    ${cyd32_display.build_flags}
    ${common_fonts.build_flags}
    -DTOUCH_RESISTIVE=1
    -DTOUCH_CS=33
    -DSPI_TOUCH_FREQUENCY=2500000

; ============================================================
; CYD 3.5" (ESP32-3248S035) — ST7796 480x320
; ============================================================

; === 3.5" Capacitive touch (GT911 I2C) ===
[env:cyd35c]
lib_deps =
    ${env.lib_deps}
    https://github.com/tamctec/gt911-arduino.git
build_flags =
    -DUSER_SETUP_LOADED=1
    -DST7796_DRIVER=1
    -DTFT_WIDTH=320
    -DTFT_HEIGHT=480
    -DTFT_MISO=12
    -DTFT_MOSI=13
    -DTFT_SCLK=14
    -DTFT_CS=15
    -DTFT_DC=2
    -DTFT_RST=-1
    -DTFT_BL=27
    -DTFT_BACKLIGHT_ON=HIGH
    -DSPI_FREQUENCY=65000000
    -DSPI_READ_FREQUENCY=20000000
    ${common_fonts.build_flags}
    -DTOUCH_GT911=1
    -DTOUCH_SDA_PIN=33
    -DTOUCH_SCL_PIN=32
    -DTOUCH_INT_PIN=21
    -DTOUCH_RST_PIN=25
    -DSCR_W=480
    -DSCR_H=320
